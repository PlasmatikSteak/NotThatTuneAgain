
var blocked_artists=["Justin Beiber"];var blocked_tracks=[];var change_stations=["p3","p7mix","p6beat"];var NotThatTuneAgain_cookie=getCookie("NotThatTuneAgain");if(NotThatTuneAgain_cookie){NotThatTuneAgain_cookie=NotThatTuneAgain_cookie.split("|");if(NotThatTuneAgain_cookie[0]){blocked_artists=JSON.parse(NotThatTuneAgain_cookie[0])}if(NotThatTuneAgain_cookie[1]){blocked_tracks=JSON.parse(NotThatTuneAgain_cookie[1])}if(NotThatTuneAgain_cookie[2]){change_stations=JSON.parse(NotThatTuneAgain_cookie[2])}}makeui();setInterval(checkNumber,3000);function checkNumber(){var a=jQuery('.playlist-items .track.now-playing .name[itemprop="byArtist"]').text();var b=jQuery(".playlist-items .track.now-playing .track").find("a").text();var d=jQuery('select[name="channels"]').val();if(jQuery.inArray(a,blocked_artists)!==-1||jQuery.inArray(b,blocked_tracks)!==-1){stations_left=jQuery.grep(change_stations,function(e){return e!=d});var c=stations_left[~~(Math.random()*stations_left.length)];if(c){location.replace("http://www.dr.dk/radio/live/"+c)}}}function makeui(){var a=document.createElement("style");a.innerHTML="#notthattuneagain-ui {z-index: 9999; width: 200px; height: 250px; position: fixed; top: 150px; border-radius: 5px; border: 1px solid black; transition: left 0.5s; color: rgb(255, 255, 255); left: -200px; background-color: rgb(166, 161, 161);overflow-y: auto;}";a.innerHTML+="#buttons {margin-top: 15px; margin-left: 30px}";a.innerHTML+="#button .btn, #buttons .btn {background: #f51111; background-image: -webkit-linear-gradient(top, #f51111, #b82c2c); background-image: -moz-linear-gradient(top, #f51111, #b82c2c); background-image: -ms-linear-gradient(top, #f51111, #b82c2c); background-image: -o-linear-gradient(top, #f51111, #b82c2c); background-image: linear-gradient(to bottom, #f51111, #b82c2c); -webkit-border-radius: 20; -moz-border-radius: 20; border-radius: 20px; font-family: Arial; color: #ffffff; font-size: 12px; padding: 6px 10px 6px 10px; text-decoration: none;}";a.innerHTML+="#button .btn, #buttons .btn:hover {background: #e84c4c; background-image: -webkit-linear-gradient(top, #e84c4c, #e36262); background-image: -moz-linear-gradient(top, #e84c4c, #e36262); background-image: -ms-linear-gradient(top, #e84c4c, #e36262); background-image: -o-linear-gradient(top, #e84c4c, #e36262); background-image: linear-gradient(to bottom, #e84c4c, #e36262); text-decoration: none;}";a.innerHTML+="#no-lists {margin-left: 30px;margin-top: 10px;font-size: 13px;font-family: sans-serif;}";a.innerHTML+="#no-artists > span, #no-tracks > span, #allowed-stations > span {font-weight: 800;}";a.innerHTML+="#no-tracks, #allowed-stations {margin-top: 10px;}";a.innerHTML+="#no-lists {margin-top: 15px;margin-bottom: 15px;}";a.innerHTML+="#no-lists ul li {cursor: pointer;}";a.innerHTML+="#no-lists ul li:hover {text-decoration: line-through;}";a.innerHTML+="#button {position: absolute; right: 125px; width: 85px; top: 5px;}";document.body.appendChild(a);jQuery("#channel-selector").prepend('<div id="button"><a href="#" id="add-station" class="btn">+ station</a></div>');jQuery("body").append('<div id="notthattuneagain-ui"><div id="buttons"><a href="#" id="add-artist" class="btn">+ Artist</a>&nbsp;<a href="#" id="add-track" class="btn">+ Track</a></div><div id="no-lists"><div id="no-artists"><span>Blocked Artists</span><ul></ul></div><div id="no-tracks"><span>Blocked Tracks</span><ul></ul></div><div id="allowed-stations"><span>Allowed stations</span><ul></ul></div></div></div>');jQuery("#notthattuneagain-ui").unbind().hover(function(){jQuery(this).css("left","-5px")},function(){jQuery(this).css("left","-200px")});jQuery("#add-artist").unbind().on("click",function(){var b=jQuery('.playlist-items .track.now-playing .name[itemprop="byArtist"]').text();if(jQuery.inArray(b,blocked_artists)!==-1){alert(b+" is already blocked!")}else{blocked_artists.push(b);updateui()}});jQuery("#add-track").unbind().on("click",function(){var b=jQuery(".playlist-items .track.now-playing .track").find("a").text();if(jQuery.inArray(b,blocked_tracks)!==-1){alert(b+" is already blocked!")}else{blocked_tracks.push(b);updateui()}});jQuery("#add-station").unbind().on("click",function(){var b=jQuery('select[name="channels"]').val();if(jQuery.inArray(b,change_stations)!==-1){alert(b+" is already added!")}else{change_stations.push(b);updateui()}});jQuery(document).on("click","#no-artists > ul > li",function(){if(confirm('Remove "'+jQuery(this).text()+'" ?')){var b=jQuery.inArray(jQuery(this).text(),blocked_artists);if(b!==-1){blocked_artists.splice(b,1);updateui()}}});jQuery(document).on("click","#no-tracks > ul > li",function(){if(confirm('Remove "'+jQuery(this).text()+'" ?')){var b=jQuery.inArray(jQuery(this).text(),blocked_tracks);if(b!==-1){blocked_tracks.splice(b,1);updateui()}}});jQuery(document).on("click","#allowed-stations > ul > li",function(){if(confirm('Remove "'+jQuery(this).text()+'" ?')){var b=jQuery.inArray(jQuery(this).text(),change_stations);if(b!==-1){change_stations.splice(b,1);updateui()}}});updateui()}function updateui(){blocked_artists.sort();blocked_tracks.sort();change_stations.sort();var c=JSON.stringify(blocked_artists)+"|"+JSON.stringify(blocked_tracks)+"|"+JSON.stringify(change_stations);setCookie("NotThatTuneAgain",c);var b=jQuery("#no-artists > ul");var e="";jQuery.each(blocked_artists,function(h,i){e+="<li>"+i+"</li>"});b.html(e);var a=jQuery("#no-tracks > ul");var g="";jQuery.each(blocked_tracks,function(h,i){g+="<li>"+i+"</li>"});a.html(g);var d=jQuery("#allowed-stations > ul");var f="";jQuery.each(change_stations,function(h,i){f+="<li>"+i+"</li>"});d.html(f)}function setCookie(b,c){var a=new Date();a.setTime(a.getTime()+(60*24*60*60*1000));document.cookie=b+"="+c+";expires="+a.toUTCString()}function getCookie(a){var b=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)");return b?b[2]:null}function delCookie(a){document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"};